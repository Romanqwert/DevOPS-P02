name: NotificaciÃ³n a ntfy.sh

on:
  push:
    branches:
      - main

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Enviar notificaciÃ³n a ntfy.sh
        run: |
          # 1. Capturamos la hora actual de RD (America/Santo_Domingo)
          TIME=$(TZ="America/Santo_Domingo" date +'%d/%m/%Y %I:%M %p')
          
          # 2. Enviamos la notificaciÃ³n
          # Usamos un solo bloque -d para el mensaje completo para evitar errores
          curl \
            -H "Title: Nuevos cambios en Main" \
            -H "Tags: warning,cd" \
            -d "ðŸ‘¤ Subido por: ${{ github.actor }}
          ðŸ‡©ðŸ‡´ Hora (RD): $TIME
          ðŸ”— Commit: ${{ github.event.head_commit.message }}" \
            ntfy.sh/devops-itla